<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Module: lib.irunner &mdash; IPython 2.0.0-dev: Work in Progress documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0.0-dev: Work in Progress',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="IPython 2.0.0-dev: Work in Progress documentation" href="../../index.html" />
    <link rel="up" title="The IPython API" href="../index.html" />
    <link rel="next" title="Module: lib.latextools" href="IPython.lib.latextools.html" />
    <link rel="prev" title="Module: lib.inputhook" href="IPython.lib.inputhook.html" /> 
  </head>
  <body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="http://ipython.org/"><img src="../../_static/logo.png" border="0" alt="IPython Documentation"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="IPython.lib.latextools.html" title="Module: lib.latextools"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="IPython.lib.inputhook.html" title="Module: lib.inputhook"
             accesskey="P">previous</a> |</li>
        <li><a href="http://ipython.org">home</a>|&nbsp;</li>
        <li><a href="../../search.html">search</a>|&nbsp;</li>
       <li><a href="../../index.html">documentation </a> &raquo;</li>

          <li><a href="../index.html" accesskey="U">The IPython API</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Module: <tt class="docutils literal"><span class="pre">lib.irunner</span></tt></a><ul>
<li><a class="reference internal" href="#notes">Notes</a></li>
<li><a class="reference internal" href="#classes">5 Classes</a></li>
<li><a class="reference internal" href="#functions">2 Functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="IPython.lib.inputhook.html"
                        title="previous chapter">Module: <tt class="docutils literal"><span class="pre">lib.inputhook</span></tt></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="IPython.lib.latextools.html"
                        title="next chapter">Module: <tt class="docutils literal"><span class="pre">lib.latextools</span></tt></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/api/generated/IPython.lib.irunner.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This documentation is for a development version of IPython. There may be
significant differences from the latest stable release (1.1.0).</p>
</div>
</div></blockquote>
<div class="section" id="module-IPython.lib.irunner">
<span id="module-lib-irunner"></span><h1>Module: <tt class="xref py py-mod docutils literal"><span class="pre">lib.irunner</span></tt><a class="headerlink" href="#module-IPython.lib.irunner" title="Permalink to this headline">¶</a></h1>
<p>Module for interactively running scripts.</p>
<p>This module implements classes for interactively running scripts written for
any system with a prompt which can be matched by a regexp suitable for
pexpect.  It can be used to run as if they had been typed up interactively, an
arbitrary series of commands for the target system.</p>
<p>The module includes classes ready for IPython (with the default prompts),
plain Python and SAGE, but making a new one is trivial.  To see how to use it,
simply run the module as a script:</p>
<p>./irunner.py &#8211;help</p>
<p>This is an extension of Ken Schutte &lt;kschutte-AT-csail.mit.edu&gt;&#8217;s script
contributed on the ipython-user list:</p>
<p><a class="reference external" href="http://mail.scipy.org/pipermail/ipython-user/2006-May/003539.html">http://mail.scipy.org/pipermail/ipython-user/2006-May/003539.html</a></p>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>This module requires pexpect, available in most linux distros, or which can
be downloaded from <a class="reference external" href="http://pexpect.sourceforge.net">http://pexpect.sourceforge.net</a></li>
<li>Because pexpect only works under Unix or Windows-Cygwin, this has the same
limitations.  This means that it will NOT work under native windows Python.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="classes">
<h2>5 Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="IPython.lib.irunner.InteractiveRunner">
<em class="property">class </em><tt class="descclassname">IPython.lib.irunner.</tt><tt class="descname">InteractiveRunner</tt><big>(</big><em>program</em>, <em>prompts</em>, <em>args=None</em>, <em>out=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x2b7338861150&gt;</em>, <em>echo=True</em><big>)</big><a class="headerlink" href="#IPython.lib.irunner.InteractiveRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Class to run a sequence of commands through an interactive program.</p>
<dl class="method">
<dt id="IPython.lib.irunner.InteractiveRunner.__init__">
<tt class="descname">__init__</tt><big>(</big><em>program</em>, <em>prompts</em>, <em>args=None</em>, <em>out=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x2b7338861150&gt;</em>, <em>echo=True</em><big>)</big><a class="headerlink" href="#IPython.lib.irunner.InteractiveRunner.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a runner.</p>
<p>Inputs:</p>
<blockquote>
<div><ul class="simple">
<li>program: command to execute the given program.</li>
<li>prompts: a list of patterns to match as valid prompts, in the
format used by pexpect.  This basically means that it can be either
a string (to be compiled as a regular expression) or a list of such
(it must be a true list, as pexpect does type checks).</li>
</ul>
<p>If more than one prompt is given, the first is treated as the main
program prompt and the others as &#8216;continuation&#8217; prompts, like
python&#8217;s.  This means that blank lines in the input source are
ommitted when the first prompt is matched, but are NOT ommitted when
the continuation one matches, since this is how python signals the
end of multiline input interactively.</p>
</div></blockquote>
<p>Optional inputs:</p>
<blockquote>
<div><ul class="simple">
<li>args(None): optional list of strings to pass as arguments to the
child program.</li>
<li>out(sys.stdout): if given, an output stream to be used when writing
output.  The only requirement is that it must have a .write() method.</li>
</ul>
</div></blockquote>
<p>Public members not parameterized in the constructor:</p>
<blockquote>
<div><ul class="simple">
<li>delaybeforesend(0): Newer versions of pexpect have a delay before
sending each new input.  For our purposes here, it&#8217;s typically best
to just set this to zero, but if you encounter reliability problems
or want an interactive run to pause briefly at each prompt, just
increase this value (it is measured in seconds).  Note that this
variable is not honored at all by older versions of pexpect.</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="IPython.lib.irunner.InteractiveRunner.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.lib.irunner.InteractiveRunner.close" title="Permalink to this definition">¶</a></dt>
<dd><p>close child process</p>
</dd></dl>

<dl class="method">
<dt id="IPython.lib.irunner.InteractiveRunner.main">
<tt class="descname">main</tt><big>(</big><em>argv=None</em><big>)</big><a class="headerlink" href="#IPython.lib.irunner.InteractiveRunner.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Run as a command-line script.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.lib.irunner.InteractiveRunner.run_file">
<tt class="descname">run_file</tt><big>(</big><em>fname</em>, <em>interact=False</em>, <em>get_output=False</em><big>)</big><a class="headerlink" href="#IPython.lib.irunner.InteractiveRunner.run_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the given file interactively.</p>
<p>Inputs:</p>
<blockquote>
<div><ul class="simple">
<li>fname: name of the file to execute.</li>
</ul>
</div></blockquote>
<p>See the run_source docstring for the meaning of the optional
arguments.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.lib.irunner.InteractiveRunner.run_source">
<tt class="descname">run_source</tt><big>(</big><em>source</em>, <em>interact=False</em>, <em>get_output=False</em><big>)</big><a class="headerlink" href="#IPython.lib.irunner.InteractiveRunner.run_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the given source code interactively.</p>
<p>Inputs:</p>
<blockquote>
<div><ul class="simple">
<li>source: a string of code to be executed, or an open file object we
can iterate over.</li>
</ul>
</div></blockquote>
<p>Optional inputs:</p>
<blockquote>
<div><ul class="simple">
<li>interact(False): if true, start to interact with the running
program at the end of the script.  Otherwise, just exit.</li>
<li>get_output(False): if true, capture the output of the child process
(filtering the input commands out) and return it as a string.</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>Returns:</dt>
<dd>A string containing the process output, but only if requested.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="IPython.lib.irunner.IPythonRunner">
<em class="property">class </em><tt class="descclassname">IPython.lib.irunner.</tt><tt class="descname">IPythonRunner</tt><big>(</big><em>program='&lt;ipython&gt;'</em>, <em>args=None</em>, <em>out=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x2b7338861150&gt;</em>, <em>echo=True</em><big>)</big><a class="headerlink" href="#IPython.lib.irunner.IPythonRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#IPython.lib.irunner.InteractiveRunner" title="IPython.lib.irunner.InteractiveRunner"><tt class="xref py py-class docutils literal"><span class="pre">IPython.lib.irunner.InteractiveRunner</span></tt></a></p>
<p>Interactive IPython runner.</p>
<p>This initalizes IPython in &#8216;nocolor&#8217; mode for simplicity.  This lets us
avoid having to write a regexp that matches ANSI sequences, though pexpect
does support them.  If anyone contributes patches for ANSI color support,
they will be welcome.</p>
<p>It also sets the prompts manually, since the prompt regexps for
pexpect need to be matched to the actual prompts, so user-customized
prompts would break this.</p>
<dl class="method">
<dt id="IPython.lib.irunner.IPythonRunner.__init__">
<tt class="descname">__init__</tt><big>(</big><em>program='&lt;ipython&gt;'</em>, <em>args=None</em>, <em>out=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x2b7338861150&gt;</em>, <em>echo=True</em><big>)</big><a class="headerlink" href="#IPython.lib.irunner.IPythonRunner.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>New runner, optionally passing the ipython command to use.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="IPython.lib.irunner.PythonRunner">
<em class="property">class </em><tt class="descclassname">IPython.lib.irunner.</tt><tt class="descname">PythonRunner</tt><big>(</big><em>program='/home/takluyver/.virtualenvs/ipy-docs-build2/bin/python'</em>, <em>args=None</em>, <em>out=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x2b7338861150&gt;</em>, <em>echo=True</em><big>)</big><a class="headerlink" href="#IPython.lib.irunner.PythonRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#IPython.lib.irunner.InteractiveRunner" title="IPython.lib.irunner.InteractiveRunner"><tt class="xref py py-class docutils literal"><span class="pre">IPython.lib.irunner.InteractiveRunner</span></tt></a></p>
<p>Interactive Python runner.</p>
<dl class="method">
<dt id="IPython.lib.irunner.PythonRunner.__init__">
<tt class="descname">__init__</tt><big>(</big><em>program='/home/takluyver/.virtualenvs/ipy-docs-build2/bin/python'</em>, <em>args=None</em>, <em>out=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x2b7338861150&gt;</em>, <em>echo=True</em><big>)</big><a class="headerlink" href="#IPython.lib.irunner.PythonRunner.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>New runner, optionally passing the python command to use.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="IPython.lib.irunner.SAGERunner">
<em class="property">class </em><tt class="descclassname">IPython.lib.irunner.</tt><tt class="descname">SAGERunner</tt><big>(</big><em>program='sage'</em>, <em>args=None</em>, <em>out=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x2b7338861150&gt;</em>, <em>echo=True</em><big>)</big><a class="headerlink" href="#IPython.lib.irunner.SAGERunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#IPython.lib.irunner.InteractiveRunner" title="IPython.lib.irunner.InteractiveRunner"><tt class="xref py py-class docutils literal"><span class="pre">IPython.lib.irunner.InteractiveRunner</span></tt></a></p>
<p>Interactive SAGE runner.</p>
<p>WARNING: this runner only works if you manually adjust your SAGE
configuration so that the &#8216;color&#8217; option in the configuration file is set to
&#8216;NoColor&#8217;, because currently the prompt matching regexp does not identify
color sequences.</p>
<dl class="method">
<dt id="IPython.lib.irunner.SAGERunner.__init__">
<tt class="descname">__init__</tt><big>(</big><em>program='sage'</em>, <em>args=None</em>, <em>out=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x2b7338861150&gt;</em>, <em>echo=True</em><big>)</big><a class="headerlink" href="#IPython.lib.irunner.SAGERunner.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>New runner, optionally passing the sage command to use.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="IPython.lib.irunner.RunnerFactory">
<em class="property">class </em><tt class="descclassname">IPython.lib.irunner.</tt><tt class="descname">RunnerFactory</tt><big>(</big><em>out=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x2b7338861150&gt;</em><big>)</big><a class="headerlink" href="#IPython.lib.irunner.RunnerFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Code runner factory.</p>
<p>This class provides an IPython code runner, but enforces that only one
runner is ever instantiated.  The runner is created based on the extension
of the first file to run, and it raises an exception if a runner is later
requested for a different extension type.</p>
<p>This ensures that we don&#8217;t generate example files for doctest with a mix of
python and ipython syntax.</p>
<dl class="method">
<dt id="IPython.lib.irunner.RunnerFactory.__init__">
<tt class="descname">__init__</tt><big>(</big><em>out=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x2b7338861150&gt;</em><big>)</big><a class="headerlink" href="#IPython.lib.irunner.RunnerFactory.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate a code runner.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="functions">
<h2>2 Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="IPython.lib.irunner.pexpect_monkeypatch">
<tt class="descclassname">IPython.lib.irunner.</tt><tt class="descname">pexpect_monkeypatch</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.lib.irunner.pexpect_monkeypatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Patch pexpect to prevent unhandled exceptions at VM teardown.</p>
<p>Calling this function will monkeypatch the pexpect.spawn class and modify
its __del__ method to make it more robust in the face of failures that can
occur if it is called when the Python VM is shutting down.</p>
<p>Since Python may fire __del__ methods arbitrarily late, it&#8217;s possible for
them to execute during the teardown of the Python VM itself.  At this
point, various builtin modules have been reset to None.  Thus, the call to
self.close() will trigger an exception because it tries to call os.close(),
and os is now None.</p>
</dd></dl>

<dl class="function">
<dt id="IPython.lib.irunner.main">
<tt class="descclassname">IPython.lib.irunner.</tt><tt class="descname">main</tt><big>(</big><big>)</big><a class="headerlink" href="#IPython.lib.irunner.main" title="Permalink to this definition">¶</a></dt>
<dd><p>Run as a command-line script.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="IPython.lib.latextools.html" title="Module: lib.latextools"
             >next</a> |</li>
        <li class="right" >
          <a href="IPython.lib.inputhook.html" title="Module: lib.inputhook"
             >previous</a> |</li>
        <li><a href="http://ipython.org">home</a>|&nbsp;</li>
        <li><a href="../../search.html">search</a>|&nbsp;</li>
       <li><a href="../../index.html">documentation </a> &raquo;</li>

          <li><a href="../index.html" >The IPython API</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008, The IPython Development Team.
      Last updated on Nov 18, 2013.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b3.
    </div>
  </body>
</html>
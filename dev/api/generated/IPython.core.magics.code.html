<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Module: core.magics.code &mdash; IPython 2.0.0-dev: Work in Progress documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0.0-dev: Work in Progress',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="IPython 2.0.0-dev: Work in Progress documentation" href="../../index.html" />
    <link rel="up" title="The IPython API" href="../index.html" />
    <link rel="next" title="Module: core.magics.config" href="IPython.core.magics.config.html" />
    <link rel="prev" title="Module: core.magics.basic" href="IPython.core.magics.basic.html" /> 
  </head>
  <body>

<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="http://ipython.org/"><img src="../../_static/logo.png" border="0" alt="IPython Documentation"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="IPython.core.magics.config.html" title="Module: core.magics.config"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="IPython.core.magics.basic.html" title="Module: core.magics.basic"
             accesskey="P">previous</a> |</li>
        <li><a href="http://ipython.org">home</a>|&nbsp;</li>
        <li><a href="../../search.html">search</a>|&nbsp;</li>
       <li><a href="../../index.html">documentation </a> &raquo;</li>

          <li><a href="../index.html" accesskey="U">The IPython API</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Module: <tt class="docutils literal"><span class="pre">core.magics.code</span></tt></a><ul>
<li><a class="reference internal" href="#classes">3 Classes</a></li>
<li><a class="reference internal" href="#functions">2 Functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="IPython.core.magics.basic.html"
                        title="previous chapter">Module: <tt class="docutils literal"><span class="pre">core.magics.basic</span></tt></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="IPython.core.magics.config.html"
                        title="next chapter">Module: <tt class="docutils literal"><span class="pre">core.magics.config</span></tt></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/api/generated/IPython.core.magics.code.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This documentation is for a development version of IPython. There may be
significant differences from the latest stable release (1.1.0).</p>
</div>
</div></blockquote>
<div class="section" id="module-IPython.core.magics.code">
<span id="module-core-magics-code"></span><h1>Module: <tt class="xref py py-mod docutils literal"><span class="pre">core.magics.code</span></tt><a class="headerlink" href="#module-IPython.core.magics.code" title="Permalink to this headline">¶</a></h1>
<p>Implementation of code management magic functions.</p>
<div class="section" id="classes">
<h2>3 Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="IPython.core.magics.code.MacroToEdit">
<em class="property">class </em><tt class="descclassname">IPython.core.magics.code.</tt><tt class="descname">MacroToEdit</tt><a class="headerlink" href="#IPython.core.magics.code.MacroToEdit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">exceptions.ValueError</span></tt></p>
</dd></dl>

<dl class="class">
<dt id="IPython.core.magics.code.InteractivelyDefined">
<em class="property">class </em><tt class="descclassname">IPython.core.magics.code.</tt><tt class="descname">InteractivelyDefined</tt><big>(</big><em>index</em><big>)</big><a class="headerlink" href="#IPython.core.magics.code.InteractivelyDefined" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></tt></p>
<p>Exception for interactively defined variable in magic_edit</p>
<dl class="method">
<dt id="IPython.core.magics.code.InteractivelyDefined.__init__">
<tt class="descname">__init__</tt><big>(</big><em>index</em><big>)</big><a class="headerlink" href="#IPython.core.magics.code.InteractivelyDefined.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="IPython.core.magics.code.CodeMagics">
<em class="property">class </em><tt class="descclassname">IPython.core.magics.code.</tt><tt class="descname">CodeMagics</tt><big>(</big><em>shell=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#IPython.core.magics.code.CodeMagics" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="IPython.core.magic.html#IPython.core.magic.Magics" title="IPython.core.magic.Magics"><tt class="xref py py-class docutils literal"><span class="pre">IPython.core.magic.Magics</span></tt></a></p>
<p>Magics related to code management (loading, saving, editing, ...).</p>
<dl class="method">
<dt id="IPython.core.magics.code.CodeMagics.edit">
<tt class="descname">edit</tt><big>(</big><em>parameter_s='', last_call=['', '']</em><big>)</big><a class="headerlink" href="#IPython.core.magics.code.CodeMagics.edit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bring up an editor and execute the resulting code.</p>
<dl class="docutils">
<dt>Usage:</dt>
<dd>%edit [options] [args]</dd>
</dl>
<p>%edit runs IPython&#8217;s editor hook. The default version of this hook is
set to call the editor specified by your $EDITOR environment variable.
If this isn&#8217;t found, it will default to vi under Linux/Unix and to
notepad under Windows. See the end of this docstring for how to change
the editor hook.</p>
<p>You can also set the value of this editor via the
<tt class="docutils literal"><span class="pre">TerminalInteractiveShell.editor</span></tt> option in your configuration file.
This is useful if you wish to use a different editor from your typical
default with IPython (and for Windows users who typically don&#8217;t set
environment variables).</p>
<p>This command allows you to conveniently edit multi-line code right in
your IPython session.</p>
<p>If called without arguments, %edit opens up an empty editor with a
temporary file and will execute the contents of this file when you
close it (don&#8217;t forget to save it!).</p>
<p>Options:</p>
<p>-n &lt;number&gt;: open the editor at a specified line number.  By default,
the IPython editor hook uses the unix syntax &#8216;editor +N filename&#8217;, but
you can configure this by providing your own modified hook if your
favorite editor supports line-number specifications with a different
syntax.</p>
<p>-p: this will call the editor with the same data as the previous time
it was used, regardless of how long ago (in your current session) it
was.</p>
<p>-r: use &#8216;raw&#8217; input.  This option only applies to input taken from the
user&#8217;s history.  By default, the &#8216;processed&#8217; history is used, so that
magics are loaded in their transformed version to valid Python.  If
this option is given, the raw input as typed as the command line is
used instead.  When you exit the editor, it will be executed by
IPython&#8217;s own processor.</p>
<p>-x: do not execute the edited code immediately upon exit. This is
mainly useful if you are editing programs which need to be called with
command line arguments, which you can then do using %run.</p>
<p>Arguments:</p>
<p>If arguments are given, the following possibilities exist:</p>
<ul class="simple">
<li>If the argument is a filename, IPython will load that into the
editor. It will execute its contents with execfile() when you exit,
loading any code in the file into your interactive namespace.</li>
<li>The arguments are ranges of input history,  e.g. &#8220;7 ~1/4-6&#8221;.
The syntax is the same as in the %history magic.</li>
<li>If the argument is a string variable, its contents are loaded
into the editor. You can thus edit any string which contains
python code (including the result of previous edits).</li>
<li>If the argument is the name of an object (other than a string),
IPython will try to locate the file where it was defined and open the
editor at the point where it is defined. You can use <cite>%edit function</cite>
to load an editor exactly at the point where &#8216;function&#8217; is defined,
edit it and have the file be executed automatically.</li>
<li>If the object is a macro (see %macro for details), this opens up your
specified editor with a temporary file containing the macro&#8217;s data.
Upon exit, the macro is reloaded with the contents of the file.</li>
</ul>
<p>Note: opening at an exact line is only supported under Unix, and some
editors (like kedit and gedit up to Gnome 2.8) do not understand the
&#8216;+NUMBER&#8217; parameter necessary for this feature. Good editors like
(X)Emacs, vi, jed, pico and joe all do.</p>
<p>After executing your code, %edit will return as output the code you
typed in the editor (except when it was an existing file). This way
you can reload the code in further invocations of %edit as a variable,
via _&lt;NUMBER&gt; or Out[&lt;NUMBER&gt;], where &lt;NUMBER&gt; is the prompt number of
the output.</p>
<p>Note that %edit is also available through the alias %ed.</p>
<p>This is an example of creating a simple function inside the editor and
then modifying it. First, start up the editor:</p>
<div class="highlight-python"><pre>In [1]: edit
Editing... done. Executing edited code...
Out[1]: 'def foo():\n    print "foo() was defined in an editing
session"\n'</pre>
</div>
<p>We can then call the function foo():</p>
<div class="highlight-python"><pre>In [2]: foo()
foo() was defined in an editing session</pre>
</div>
<p>Now we edit foo.  IPython automatically loads the editor with the
(temporary) file where foo() was previously defined:</p>
<div class="highlight-python"><pre>In [3]: edit foo
Editing... done. Executing edited code...</pre>
</div>
<p>And if we call foo() again we get the modified version:</p>
<div class="highlight-python"><pre>In [4]: foo()
foo() has now been changed!</pre>
</div>
<p>Here is an example of how to edit a code snippet successive
times. First we call the editor:</p>
<div class="highlight-python"><pre>In [5]: edit
Editing... done. Executing edited code...
hello
Out[5]: "print 'hello'\n"</pre>
</div>
<p>Now we call it again with the previous output (stored in _):</p>
<div class="highlight-python"><pre>In [6]: edit _
Editing... done. Executing edited code...
hello world
Out[6]: "print 'hello world'\n"</pre>
</div>
<p>Now we call it with the output #8 (stored in _8, also as Out[8]):</p>
<div class="highlight-python"><pre>In [7]: edit _8
Editing... done. Executing edited code...
hello again
Out[7]: "print 'hello again'\n"</pre>
</div>
<p>Changing the default editor hook:</p>
<p>If you wish to write your own editor hook, you can put it in a
configuration file which you load at startup time.  The default hook
is defined in the IPython.core.hooks module, and you can use that as a
starting example for further modifications.  That file also has
general instructions on how to set a new hook for use once you&#8217;ve
defined it.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.magics.code.CodeMagics.load">
<tt class="descname">load</tt><big>(</big><em>arg_s</em><big>)</big><a class="headerlink" href="#IPython.core.magics.code.CodeMagics.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load code into the current frontend.</p>
<dl class="docutils">
<dt>Usage:</dt>
<dd><p class="first">%load [options] source</p>
<p class="last">where source can be a filename, URL, input history range or macro</p>
</dd>
</dl>
<p>Options:</p>
<blockquote>
<div><p>-r &lt;lines&gt;: Specify lines or ranges of lines to load from the source.
Ranges could be specified as x-y (x..y) or in python-style x:y 
(x..(y-1)). Both limits x and y can be left blank (meaning the 
beginning and end of the file, respectively).</p>
<p>-s &lt;symbols&gt;: Specify function or classes to load from python source.</p>
<p>-y : Don&#8217;t ask confirmation for loading source above 200 000 characters.</p>
</div></blockquote>
<p>This magic command can either take a local filename, a URL, an history
range (see %history) or a macro as argument, it will prompt for
confirmation before loading source with more than 200 000 characters, unless
-y flag is passed or if the frontend does not support raw_input:</p>
<div class="highlight-python"><pre>%load myscript.py
%load 7-27
%load myMacro
%load http://www.example.com/myscript.py
%load -r 5-10 myscript.py
%load -r 10-20,30,40: foo.py
%load -s MyClass,wonder_function myscript.py</pre>
</div>
</dd></dl>

<dl class="method">
<dt id="IPython.core.magics.code.CodeMagics.loadpy">
<tt class="descname">loadpy</tt><big>(</big><em>arg_s</em><big>)</big><a class="headerlink" href="#IPython.core.magics.code.CodeMagics.loadpy" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias of <cite>%load</cite></p>
<p><cite>%loadpy</cite> has gained some flexibility and dropped the requirement of a <cite>.py</cite>
extension. So it has been renamed simply into %load. You can look at
<cite>%load</cite>&#8216;s docstring for more info.</p>
</dd></dl>

<dl class="method">
<dt id="IPython.core.magics.code.CodeMagics.pastebin">
<tt class="descname">pastebin</tt><big>(</big><em>parameter_s=''</em><big>)</big><a class="headerlink" href="#IPython.core.magics.code.CodeMagics.pastebin" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload code to Github&#8217;s Gist paste bin, returning the URL.</p>
<dl class="docutils">
<dt>Usage:</dt>
<dd>%pastebin [-d &#8220;Custom description&#8221;] 1-7</dd>
</dl>
<p>The argument can be an input history range, a filename, or the name of a
string or macro.</p>
<p>Options:</p>
<blockquote>
<div><dl class="docutils">
<dt>-d: Pass a custom description for the gist. The default will say</dt>
<dd>&#8220;Pasted from IPython&#8221;.</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="IPython.core.magics.code.CodeMagics.save">
<tt class="descname">save</tt><big>(</big><em>parameter_s=''</em><big>)</big><a class="headerlink" href="#IPython.core.magics.code.CodeMagics.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a set of lines or a macro to a given filename.</p>
<dl class="docutils">
<dt>Usage:</dt>
<dd>%save [options] filename n1-n2 n3-n4 ... n5 .. n6 ...</dd>
</dl>
<p>Options:</p>
<blockquote>
<div><p>-r: use &#8216;raw&#8217; input.  By default, the &#8216;processed&#8217; history is used,
so that magics are loaded in their transformed version to valid
Python.  If this option is given, the raw input as typed as the
command line is used instead.</p>
<p>-f: force overwrite.  If file exists, %save will prompt for overwrite
unless -f is given.</p>
<p>-a: append to the file instead of overwriting it.</p>
</div></blockquote>
<p>This function uses the same syntax as %history for input ranges,
then saves the lines to the filename you specify.</p>
<p>It adds a &#8216;.py&#8217; extension to the file if you don&#8217;t do so yourself, and
it asks for confirmation before overwriting existing files.</p>
<p>If <cite>-r</cite> option is used, the default extension is <cite>.ipy</cite>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="functions">
<h2>2 Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="IPython.core.magics.code.extract_code_ranges">
<tt class="descclassname">IPython.core.magics.code.</tt><tt class="descname">extract_code_ranges</tt><big>(</big><em>ranges_str</em><big>)</big><a class="headerlink" href="#IPython.core.magics.code.extract_code_ranges" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn a string of range for %%load into 2-tuples of (start, stop)
ready to use as a slice of the content splitted by lines.</p>
<p class="rubric">Examples</p>
<p>list(extract_input_ranges(&#8220;5-10 2&#8221;))
[(4, 10), (1, 2)]</p>
</dd></dl>

<dl class="function">
<dt id="IPython.core.magics.code.extract_symbols">
<tt class="descclassname">IPython.core.magics.code.</tt><tt class="descname">extract_symbols</tt><big>(</big><em>code</em>, <em>symbols</em><big>)</big><a class="headerlink" href="#IPython.core.magics.code.extract_symbols" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a tuple  (blocks, not_found)
where <tt class="docutils literal"><span class="pre">blocks</span></tt> is a list of code fragments
for each symbol parsed from code, and <tt class="docutils literal"><span class="pre">not_found</span></tt> are
symbols not found in the code.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">code</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;a = 10</span>

<span class="go">def b(): return 42</span>

<span class="go">class A: pass&#39;&#39;&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="s">extract_symbols(code, &#39;A,b,z&#39;)</span>
<span class="go">([&quot;class A: pass&quot;, &quot;def b(): return 42&quot;], [&#39;z&#39;])</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="IPython.core.magics.config.html" title="Module: core.magics.config"
             >next</a> |</li>
        <li class="right" >
          <a href="IPython.core.magics.basic.html" title="Module: core.magics.basic"
             >previous</a> |</li>
        <li><a href="http://ipython.org">home</a>|&nbsp;</li>
        <li><a href="../../search.html">search</a>|&nbsp;</li>
       <li><a href="../../index.html">documentation </a> &raquo;</li>

          <li><a href="../index.html" >The IPython API</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008, The IPython Development Team.
      Last updated on Jan 13, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.
    </div>
  </body>
</html>